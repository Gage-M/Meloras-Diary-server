/**deep breaths...you can do this**/

/*                                                           Table "public.character_sheet"
                 Column                 |  Type   | Collation | Nullable |             Default              | Storage  | Stats target | Description
----------------------------------------+---------+-----------+----------+----------------------------------+----------+--------------+-------------
 id                                     | integer |           | not null | generated by default as identity | plain    |              |
 character_id                           | integer |           | not null |                                  | plain    |              |
 experience_points                      | integer |           | not null |                                  | plain    |              |
 proficiency                            | integer |           | not null |                                  | plain    |              |
 strength                               | integer |           | not null | 10                               | plain    |              |
 strength_saving_throws_proficiency     | boolean |           | not null | false                            | plain    |              |
 dexterity                              | integer |           | not null | 10                               | plain    |              |
 dexterity_saving_throws_proficiency    | boolean |           | not null | false                            | plain    |              |
 constitution                           | integer |           | not null | 10                               | plain    |              |
 constitution_saving_throws_proficiency | boolean |           | not null | false                            | plain    |              |
 intelligence                           | integer |           | not null | 10                               | plain    |              |
 intelligence_saving_throws_proficiency | boolean |           | not null | false                            | plain    |              |
 wisdom                                 | integer |           | not null | 10                               | plain    |              |
 wisdom_saving_throws_proficiency       | boolean |           | not null | false                            | plain    |              |
 charisma                               | integer |           | not null | 10                               | plain    |              |
 charisma_saving_throws_proficiency     | boolean |           | not null | false                            | plain    |              |
 acrobatics_proficiency                 | boolean |           | not null | false                            | plain    |              |
 animal_handling_proficiency            | boolean |           | not null | false                            | plain    |              |
 arcana_proficiency                     | boolean |           | not null | false                            | plain    |              |
 athletics_proficiency                  | boolean |           | not null | false                            | plain    |              |
 deception_proficiency                  | boolean |           | not null | false                            | plain    |              |
 history_proficiency                    | boolean |           | not null | false                            | plain    |              |
 insight_proficiency                    | boolean |           | not null | false                            | plain    |              |
 intimidation_proficiency               | boolean |           | not null | false                            | plain    |              |
 investigation_proficiency              | boolean |           | not null | false                            | plain    |              |
 medicine_proficiency                   | boolean |           | not null | false                            | plain    |              |
 nature_proficiency                     | boolean |           | not null | false                            | plain    |              |
 perception_proficiency                 | boolean |           | not null | false                            | plain    |              |
 performance_proficiency                | boolean |           | not null | false                            | plain    |              |
 persuasion_proficiency                 | boolean |           | not null | false                            | plain    |              |
 religion_proficiency                   | boolean |           | not null | false                            | plain    |              |
 sleight_of_hand_proficiency            | boolean |           | not null | false                            | plain    |              |
 stealth_proficiency                    | boolean |           | not null | false                            | plain    |              |
 survival_proficiency                   | boolean |           | not null | false                            | plain    |              |
 other_proficiencies_and_languages      | text    |           |          |                                  | extended |              |
 armor_class                            | integer |           | not null |                                  | plain    |              |
 speed                                  | integer |           | not null |                                  | plain    |              |
 max_hit_points                         | integer |           | not null |                                  | plain    |              |
 temporary_hit_points                   | integer |           | not null | 0                                | plain    |              |
 current_hit_points                     | integer |           | not null |                                  | plain    |              |
 hit_dice                               | text    |           | not null |                                  | extended |              |
 death_saves_successe                   | integer |           | not null | 0                                | plain    |              |
 death_saves_failures                   | integer |           | not null | 0                                | plain    |              |
 attack_and_spellcasting_info           | text    |           |          |                                  | extended |              |
 copper_prices                          | integer |           | not null | 0                                | plain    |              |
 silver_prices                          | integer |           | not null | 0                                | plain    |              |
 electrum_prices                        | integer |           | not null | 0                                | plain    |              |
 gold_prices                            | integer |           | not null | 0                                | plain    |              |
 platinum_prices                        | integer |           | not null | 0                                | plain    |              |
 acrobatics_expertise                   | boolean |           | not null | false                            | plain    |              |
 animal_handling_expertise              | boolean |           | not null | false                            | plain    |              |
 arcana_expertise                       | boolean |           | not null | false                            | plain    |              |
 athletics_expertise                    | boolean |           | not null | false                            | plain    |              |
 deception_expertise                    | boolean |           | not null | false                            | plain    |              |
 history_expertise                      | boolean |           | not null | false                            | plain    |              |
 insight_expertise                      | boolean |           | not null | false                            | plain    |              |
 intimidation_expertise                 | boolean |           | not null | false                            | plain    |              |
 investigation_expertise                | boolean |           | not null | false                            | plain    |              |
 medicine_expertise                     | boolean |           | not null | false                            | plain    |              |
 nature_expertise                       | boolean |           | not null | false                            | plain    |              |
 perception_expertise                   | boolean |           | not null | false                            | plain    |              |
 performance_expertise                  | boolean |           | not null | false                            | plain    |              |
 persuasion_expertise                   | boolean |           | not null | false                            | plain    |              |
 religion_expertise                     | boolean |           | not null | false                            | plain    |              |
 sleight_of_hand_expertise              | boolean |           | not null | false                            | plain    |              |
 stealth_expertise                      | boolean |           | not null | false                            | plain    |              |
 survival_expertise                     | boolean |           | not null | false                            | plain    |              |
*/


/*
SELECT 
diary_users.user_name, 
info.user_name,
 classes_and_levels.*,
 class_details.*,
 character_sheet.*,
 weapon_inventory.*,
 features_and_traits.*,
 feature_trait_details.*,
 weapon_details.*,
 item_details.*,
 item_inventory.*


FROM diary_users AS users,
 character_info AS info,
 classes_and_levels AS levels,
 class_details AS class-d,
 character_sheet AS char-s,
 weapon_inventory AS wep-inv,
 features_and_traits AS fat,
  feature_trait_details AS ftd,
  weapon_details AS wep-d,
  item_details AS item-d,
  item_inventory AS item-inv


WHERE 
	character_info.player_id = diary_users.id
	AND diary_users.id = classes_and_levels.id
	AND diary_users.id = class_details.id
	AND diary_users.id = character_sheet.id <= char-s = ${ id }
	AND diary_users.id = weapon_inventory.id
	AND diary_users.id = features_and_traits.id
	AND diary_users.id = feature_trait_details.id
	AND diary_users.id = weapon_details.id
	AND diary_users.id = item_details.id
	AND diary_users.id = item_inventory.id
*/
const CharacterSheetService = {
  getCharSheetById(db,id){
    return db
      .from('character_sheet AS cs')
      .select(
        'cs.experience_points',
        'cs.proficiency',
        'cs.strength',
        'cs.strength_saving_throws_proficiency',
        'cs.dexterity',
        'cs.dexterity_saving_throws_proficiency',
        'cs.constitution',
        'cs.constitution_saving_throws_proficiency',
        'cs.intelligence',
        'cs.intelligence_saving_throws_proficiency',
        'cs.wisdom',
        'cs.wisdom_saving_throws_proficiency',
        'cs.charisma',
        'cs.charisma_saving_throws_proficiency',
        'cs.acrobatics_proficiency',
        'cs.animal_handling_proficiency',
        'cs.arcana_proficiency',
        'cs.athletics_proficiency',
        'cs.deception_proficiency',
        'cs.history_proficiency',
        'cs.insight_proficiency',
        'cs.intimidation_proficiency',
        'cs.investigation_proficiency',
        'cs.medicine_proficiency',
        'cs.nature_proficiency',
        'cs.perception_proficiency',
        'cs.performance_proficiency',
        'cs.persuasion_proficiency',
        'cs.religion_proficiency',
        'cs.sleight_of_hand_proficiency',
        'cs.stealth_proficiency',
        'cs.survival_proficiency',
        'cs.other_proficiencies_and_languages',
        'cs.armor_class',
        'cs.speed',
        'cs.max_hit_points',
        'cs.temporary_hit_points',
        'cs.current_hit_points',
        'cs.hit_dice',
        'cs.death_saves_successe',
        'cs.death_saves_failures',
        'cs.attack_and_spellcasting_info',
        'cs.copper_prices',
        'cs.silver_prices',
        'cs.electrum_prices',
        'cs.gold_prices',
        'cs.platinum_prices',
        'cs.acrobatics_expertise',
        'cs.animal_handling_expertise',
        'cs.arcana_expertise',
        'cs.athletics_expertise',
        'cs.deception_expertise',
        'cs.history_expertise',
        'cs.insight_expertise',
        'cs.intimidation_expertise',
        'cs.investigation_expertise',
        'cs.medicine_expertise',
        'cs.nature_expertise',
        'cs.perception_expertise',
        'cs.performance_expertise',
        'cs.persuasion_expertise',
        'cs.religion_expertise',
        'cs.sleight_of_hand_expertise',
        'cs.stealth_expertise',
        'cs.survival_expertise',
        db.raw(
          `json_strip_nulls(
                json_build_object(

                )
            )AS weapons_inventory`
        ),
        db.raw(
          `json_strip_nulls(
                json_build_object(

                )
            )AS item_inventory`
        ),
        db.raw(
          `json_strip_nulls(
               json_build_object(

               )
           )AS feats_and_traits` 
        )
       

      )
      .leftJoin()
      .groupBy();
  }

};

module.exports = CharacterSheetService;