CREATE TABLE IF NOT EXISTS diary_users (
id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
irl_name TEXT NOT NULL,
user_name TEXT NOT NULL,
user_password TEXT NOT NULL,
date_created TIMESTAMPTZ DEFAULT now() NOT NULL
);

CREATE TYPE alignment_choice AS ENUM (
    'Lawful-Good',
    'Neutral-Good',
    'Chaotic-Good',
    'Lawful-Neutral',
    'Neutral',
    'Chaotic-Neutral',
    'Lawful-Evil',
    'Neutral-Evil',
    'Chaotic-Evil'
);

CREATE TABLE IF NOT EXISTS character_info (
id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
player_id INTEGER 
    REFERENCES diary_users(id) ON DELETE CASCADE NOT NULL,
date_created TIMESTAMPTZ DEFAULT NOW() NOT NULL,
character_name TEXT NOT NULL, 
race  TEXT NOT NULL, -- <= and ENUM for update
background TEXT NOT NULL, 
alignment alignment_choice NOT NULL DEFAULT 'Neutral',
personality_traits TEXT NOT NULL,
ideals TEXT NOT NULL,
bonds TEXT NOT NULL,
flaws TEXT NOT NULL
);

CREATE TABLE IF NOT EXISTS class_details (
id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
class_name TEXT NOT NULL, -- update to ENUM post grade
subclass TEXT ,
lvl INTEGER NOT NULL, 
);

CREATE TABLE IF NOT EXISTS classes_and_levels (
id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
character_id INTEGER 
    REFERENCES character_info(id) ON DELETE CASCADE NOT NULL,
class_id INTEGER
    REFERENCES class_details(id) ON DELETE CASCADE NOT NULL
);



CREATE TABLE IF NOT EXISTS character_sheet(
id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
character_id INTEGER 
    REFERENCES character_info(id) ON DELETE CASCADE NOT NULL,
experience_points numeric CONSTRAINT exp_points CHECK ( experience_points > 0 ) NOT NULL,

);
CREATE TABLE IF NOT EXISTS wep_inv
id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,

CREATE TABLE IF NOT EXISTS item_inv
id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, 

CREATE TABLE IF NOT EXISTS item
id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,

CREATE TABLE IF NOT EXISTS features_and_traits
id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,

CREATE TABLE IF NOT EXISTS feature_trait
id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
